(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{371:function(t,e,r){"use strict";r.d(e,"a",function(){return o});var o=function(t){return"https://webdev-api.loftschool.com/"+t}},382:function(t,e,r){},397:function(t,e,r){"use strict";var o=r(382);r.n(o).a},408:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"works__rewriting"},[r("div",{staticClass:"rewriting"},[r("div",{staticClass:"rewriting--title"},[t._v(t._s("edit"===t.mode?"Редактирование работы":"Добавить работу")+" ")])]),r("div",{staticClass:"rewriting__work"},[r("div",{staticClass:"rewriting__work--img"},[r("label",{staticClass:"label-upload",attrs:{for:"image"}},[0!==t.photoUrl.length?r("div",{staticClass:"rewriting__work--photoUrl"},[r("img",{attrs:{src:t.photoUrl}})]):t._e(),r("vue-dropzone",{attrs:{id:"drop1",options:t.dropOptions}}),r("div",{staticClass:"label-upload--text"},[t._v("Перетащите или загрузите изображение")]),r("input",{staticClass:"label-upload--file",attrs:{name:"image",type:"file"},on:{change:t.loadPhoto}}),r("div",{staticClass:"label-upload--btn"},[r("button",{staticClass:"btn-upload",on:{click:function(t){t.preventDefault()}}},[t._v("Загрузить")])])],1)]),r("div",{staticClass:"rewriting__work--info"},[r("div",{staticClass:"rewriting__work--info-row"},[r("div",{staticClass:"rewriting__work--name-title"},[t._v("Название")]),r("div",{staticClass:"rewriting__work--name-input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.work.title,expression:"work.title"}],staticClass:"work--name",attrs:{name:"name",type:"text",autocomplete:"off"},domProps:{value:t.work.title},on:{input:function(e){e.target.composing||t.$set(t.work,"title",e.target.value)}}})])]),r("div",{staticClass:"rewriting__work--info-row"},[r("div",{staticClass:"rewriting__work--link-title"},[t._v("Ссылка")]),r("div",{staticClass:"rewriting__work--link-input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.work.link,expression:"work.link"}],staticClass:"work--link",attrs:{name:"name",type:"text",autocomplete:"off"},domProps:{value:t.work.link},on:{input:function(e){e.target.composing||t.$set(t.work,"link",e.target.value)}}})])]),r("div",{staticClass:"rewriting__work--textarea"},[r("div",{staticClass:"rewriting__work--textarea-title"},[t._v(" Описание")]),r("div",{staticClass:"rewriting__work--textarea-input"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.work.description,expression:"work.description"}],staticClass:"work--textarea",attrs:{name:"description","field-type":"textarea",autocomplete:"off"},domProps:{value:t.work.description},on:{input:function(e){e.target.composing||t.$set(t.work,"description",e.target.value)}}},[t._v("Порше Центр Пулково - является официальным дилером марки Порше в Санкт-Петербурге и предоставляет полный цикл услуг по продаже и сервисному обслуживанию автомобилей")])])]),r("work-tags",{attrs:{tagsS:t.work.techs},on:{defineTagsString:t.defineTagsString}}),r("div",{staticClass:"rewriting__work--btns"},[r("button",{staticClass:"rewriting__work--btn work--reset",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("closeAddForm")}}},[t._v("Отмена")]),r("button",{staticClass:"rewriting__work--btn work--save",attrs:{name:"name",type:"button"},on:{click:function(e){e.preventDefault(),"new"===t.mode?t.addUserWork():t.updateUserWork()}}},[t._v("Сохранить")])])],1)])])};o._withStripped=!0;var i=r(66),n=r(371),s=r(385);function a(t,e,r,o,i,n,s){try{var a=t[n](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(o,i)}function c(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var n=t.apply(e,r);function s(t){a(n,o,i,s,c,"next",t)}function c(t){a(n,o,i,s,c,"throw",t)}s(void 0)})}}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?Object(arguments[e]):{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),o.forEach(function(e){u(t,e,r[e])})}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={props:{mode:String},data:function(){return{payloaD:{type:"success",text:"hello"},photoUrl:"",techsStirng:"",work:{id:"",title:"",techs:"",photo:"",link:"",description:""},dropOptions:{url:"https://httpbin.org/post",maxFileSize:1.5,maxFiles:1,chunking:!1,addRemoveLinks:!1}}},components:{workTags:function(){return r.e(13).then(r.bind(null,413))},vueDropzone:r.n(s).a},computed:l({},Object(i.e)("works",{currentWork:function(t){return t.currentWork}})),watch:{currentWork:function(){"edit"===this.mode&&this.getCurrentWork()},mode:function(){"edit"===this.mode?this.getCurrentWork():(this.work={},this.work.techs="",this.photoUrl="")}},created:function(){"edit"===this.mode&&this.getCurrentWork()},methods:l({},Object(i.b)("works",["addWork","updateWork","getWorks"]),Object(i.b)("tooltips",["showTooltip"]),{loadPhoto:function(t){var e=t.target.files[0];this.work.photo=e,this.getPhoto(e)},getPhoto:function(t){var e=this,r=new FileReader;try{r.readAsDataURL(t),r.onload=function(){e.photoUrl=r.result}}catch(t){this.showTooltip({type:"error",text:"Не получилось прочитать фото"})}},addUserWork:function(){var t=c(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.addWork(this.work);case 3:e=t.sent,this.work={},this.$emit("closeAddForm"),201==e?this.showTooltip({type:"success",text:"Работа добавлена"}):this.showTooltip({type:"error",text:"Работа не добавлена"}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),this.showTooltip({type:"error",text:t.t0.message});case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}(),updateUserWork:function(){var t=c(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.updateWork(this.work);case 3:e=t.sent,console.log(e),this.getWorks(),this.work={},this.$emit("closeAddForm"),this.showTooltip({type:"success",text:"Работа изменена"}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),this.showTooltip({type:"error",text:t.t0.message});case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}(),defineTagsString:function(t){this.work.techs=t},getCurrentWork:function(){this.work=l({},this.currentWork),this.photoUrl=Object(n.a)(this.work.photo),this.work.photo=""}})},d=(r(397),r(96)),w=Object(d.a)(p,o,[],!1,null,null,null);w.options.__file="src/admin/components/worksUpgrate.vue";e.default=w.exports}}]);